webpackJsonp([2],{"C+uV":function(t,e){},DLey:function(t,e){},GhJM:function(t,e,n){"use strict";e.a=function(t){return Object(i.b)({url:o.trackRecord,method:"post",data:t})};var i=n("vLgD"),o={trackRecord:"/accounttrack"}},KoY5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Eg+s"),o=n("GW0m"),a=n.n(o),r=n("R2EP"),l=n.n(r),u=n("AfA0"),s=n.n(u),c=(n("GhJM"),n("DK4l")),d=n.n(c),m=n("26vW"),f=n.n(m),p=n("vLgD"),h={performanceResult:"/performanceresult"};var g={components:{PageLayout:i.a,AButton:d.a,ACard:a.a,AIcon:l.a,AUploadDragger:s.a,ATable:f.a},data:function(){return{fileList:[],uploading:!1,dataSource:[],loading:!1,filteredInfo:null,sortedInfo:null,pagination:{showQuickJumper:!0,pageSize:10}}},computed:{title:function(){return this.$route.meta.title},columns:function(){var t=this.sortedInfo,e=this.filteredInfo;t=t||{},e=e||{};var n=[{title:"保单号",dataIndex:"policy_no",key:"policy_no"},{title:"车牌",dataIndex:"plate_no",key:"plate_no"},{title:"投保电话",dataIndex:"mobile",key:"mobile"},{title:"有效通次",dataIndex:"num_valid",key:"num_valid",sorter:function(t,e){return t.num_valid-e.num_valid},sortOrder:"num_valid"===t.columnKey&&t.order},{title:"通话时长",dataIndex:"talk_time",key:"talk_time",sorter:function(t,e){return t.talk_time-e.talk_time},sortOrder:"talk_time"===t.columnKey&&t.order},{title:"算价次数",dataIndex:"num_calculate",key:"num_calculate",sorter:function(t,e){return t.num_calculate-e.num_calculate},sortOrder:"num_calculate"===t.columnKey&&t.order},{title:"团队",dataIndex:"team",key:"team",sorter:function(t,e){return t.team-e.team},sortOrder:"team"===t.columnKey&&t.order}];return n}},methods:{handleRemove:function(t){var e=this.fileList.indexOf(t),n=this.fileList.slice();n.splice(e,1),this.fileList=n},beforeUpload:function(t){return"application/vnd.ms-excel"===t.type||"text/csv"===t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type?(this.fileList=[t],this.dataSource=[]):this.$notification.warning({message:"你只能上传xls,xlsx或csv格式文件"}),!1},handleUpload:function(){var t,e=this,n=this.fileList,i=new FormData;n.forEach(function(t){i.append("files[]",t)}),this.uploading=!0,(t=i,Object(p.b)({url:h.performanceResult,method:"post",data:t})).then(function(t){e.uploading=!1,e.dataSource=t.result,e.$notification.success({message:"上传并分析文件成功！"})}).catch(function(t){e.uploading=!1,e.$notification.error({message:"上传并分析文件失败！"})})},handleChange:function(t,e,n){this.filteredInfo=e,this.sortedInfo=n}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-layout",{attrs:{title:t.title}},[n("a-card",{staticStyle:{padding:"0"},attrs:{title:"上传文件",bordered:!1}},[n("a-upload-dragger",{attrs:{name:"file",multiple:!1,fileList:t.fileList,beforeUpload:t.beforeUpload,remove:t.handleRemove}},[n("p",{staticClass:"ant-upload-drag-icon"},[n("a-icon",{attrs:{type:"inbox"}})],1),t._v(" "),n("p",{staticClass:"ant-upload-text"},[t._v("单击或拖动文件到此区域")]),t._v(" "),n("p",{staticClass:"ant-upload-hint"},[t._v("上传业绩清单后可进行业绩分析")])]),t._v(" "),n("a-button",{staticStyle:{"margin-top":"16px"},attrs:{type:"primary",disabled:0===t.fileList.length,loading:t.uploading,block:""},on:{click:t.handleUpload}},[t._v("\n        "+t._s(t.uploading?"正在上传并分析":"开始上传")+"\n        ")])],1),t._v(" "),n("a-card",{staticStyle:{padding:"0"},attrs:{title:"分析结果",bordered:!1}},[n("a-table",{attrs:{dataSource:t.dataSource,columns:t.columns,scroll:{x:1300},pagination:t.pagination,loading:t.uploading},on:{change:t.handleChange}})],1)],1)},staticRenderFns:[]};var v=n("Mz/3")(g,y,!1,function(t){n("C+uV")},null,null);e.default=v.exports},gas8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Sxqw"),o=n.n(i),a=n("26vW"),r=n.n(a),l=n("DK4l"),u=n.n(l),s=n("6Koo"),c=n("3SZ7"),d=n.n(c),m=n("/Ko3"),f=n.n(m),p=n("5nhJ"),h={components:{AModal:f.a,query:p.a},data:function(){return{maskClosable:!1,ModalText:"Content of the modal",visible:!1,confirmLoading:!1,structure:{fields:[{id:1,field:"create_datetime",text:"呼叫时间",type:"input",options:[],isDuration:!0,isNumber:!0},{id:2,field:"hours",text:"时间",type:"input",options:[],isDuration:!0,isNumber:!0},{id:3,field:"num",text:"总通次",type:"input",options:[],isDuration:!1,isNumber:!0},{id:4,field:"num_valid",text:"有效通次",type:"input",options:[],isDuration:!1,isNumber:!0},{id:5,field:"talk_time",text:"通时",type:"input",options:[],isDuration:!0,isNumber:!0}],stringConditions:[{id:1,condition:"=",text:"等于",type:"input"},{id:2,condition:"like_contain",text:"包含",type:"input"}],numberConditions:[{id:1,condition:"=",text:"等于",type:"input"},{id:2,condition:"!=",text:"不等于",type:"input"},{id:3,condition:">",text:"大于",type:"input"},{id:4,condition:">=",text:"大于等于",type:"input"},{id:5,condition:"<",text:"小于",type:"input"},{id:6,condition:"<=",text:"小于等于",type:"input"}],connectionWay:[{connection:"与"},{connection:"或"}]}}},methods:{showQueryModal:function(){this.visible=!0},handleOk:function(t){var e=this,n=this;this.$refs.dialogtreeQuery.dataSource.forEach(function(t){t.fieldSelected&&(n.$refs.dialogtreeQuery.searchConditionResult=[].concat(o()(n.$refs.dialogtreeQuery.searchConditionResult),[{key:t.key,field:t.fieldSelected||{},condition:t.conditionSelected||{},value:n.$trim(t.value)||{}}]))}),this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,setTimeout(function(){e.visible=!1,e.confirmLoading=!1,alert(d()(e.$refs.dialogtreeQuery.searchConditionResult)),e.$refs.dialogtreeQuery.searchConditionResult=[]},2e3)},handleCancel:function(t){this.visible=!1}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"queryModal"},[e("a-modal",{attrs:{title:"查询",visible:this.visible,maskClosable:this.maskClosable,confirmLoading:this.confirmLoading,width:"907px"},on:{ok:this.handleOk,cancel:this.handleCancel}},[e("query",{ref:"dialogtreeQuery",attrs:{structure:this.structure}})],1)],1)},staticRenderFns:[]},y=n("Mz/3")(h,g,!1,null,null,null).exports,v=n("Eg+s"),x=u.a.Group,C={props:{customerId:String},components:{ATable:r.a,AButton:u.a,AButtonGroup:x,queryModal:y,PageLayout:v.a},data:function(){return{dataSource:[],selectedRowKeys:[],loading:!1,loadingCallHistory:!1,filteredInfo:null,sortedInfo:null,pagination:{showQuickJumper:!0,pageSize:10}}},mounted:function(){this.getDataFromServer()},watch:{customerId:{handler:function(t){var e=this;this.loading=!0,Object(s.setTimeout)(function(){e.loading=!1,e.deleteLocalHistory()},1e3)}}},computed:{title:function(){return this.$route.meta.title},hasSelected:function(){return this.selectedRowKeys.length>0},columns:function(){var t=this.sortedInfo,e=this.filteredInfo;t=t||{},e=e||{};var n=[{title:"呼叫时间",dataIndex:"CallDuration",key:"CallDuration",sorter:function(t,e){return t.CallDuration.length-e.CallDuration.length},sortOrder:"CallDuration"===t.columnKey&&t.order},{title:"时间",dataIndex:"duration",key:"duration",sorter:function(t,e){return t.duration.length-e.duration.length},sortOrder:"duration"===t.columnKey&&t.order},{title:"总通次",dataIndex:"totalCommunicateTime",key:"totalCommunicateTime",sorter:function(t,e){return t.totalCommunicateTime.length-e.totalCommunicateTime.length},sortOrder:"totalCommunicateTime"===t.columnKey&&t.order},{title:"有效通次",dataIndex:"validCommunicateTime",key:"validCommunicateTime",sorter:function(t,e){return t.validCommunicateTime.length-e.validCommunicateTime.length},sortOrder:"validCommunicateTime"===t.columnKey&&t.order},{title:"通时",dataIndex:"communicateDuration",key:"communicateDuration",sorter:function(t,e){return t.communicateDuration.length-e.communicateDuration.length},sortOrder:"communicateDuration"===t.columnKey&&t.order}];return n}},methods:{onSelectChange:function(t){this.selectedRowKeys=t},showExportModal:function(){},getDataFromServer:function(){for(var t=0;t<25;t++)this.dataSource.push({key:t,id:t,CallDuration:t,duration:t,totalCommunicateTime:t,validCommunicateTime:t,communicateDuration:t})},deleteLocalHistory:function(){this.dataSource=[]},handleChange:function(t,e,n){this.filteredInfo=e,this.sortedInfo=n},onDelete:function(t){var e=this;this.$confirm({title:"你确定要踢除该坐席吗?",content:"Some descriptions",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){e.loading=!0,Object(s.setTimeout)(function(){e.loading=!1;var n=[].concat(o()(e.dataSource));e.dataSource=n.filter(function(e){return e.key!==t})},1e3)},onCancel:function(){}})},showQueryModel:function(){this.$refs.dialogtreeQueryModal.showQueryModal()}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-layout",{attrs:{title:t.title}},[n("template",{slot:"action"},[n("div",{staticClass:"interval-sovle"},[n("a-button-group",{staticStyle:{"margin-right":"8px"}},[n("a-button",{attrs:{icon:"export"},on:{click:t.showExportModal}},[t._v("\n          导出\n        ")])],1),t._v(" "),n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.showQueryModel}},[n("span",[t._v("查询")]),t._v(" "),n("queryModal",{ref:"dialogtreeQueryModal"})],1)],1)]),t._v(" "),n("div",{staticClass:"callStatistics"},[n("a-table",{attrs:{rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},dataSource:t.dataSource,columns:t.columns,scroll:{x:1300},pagination:t.pagination,loading:t.loading},on:{change:t.handleChange},scopedSlots:t._u([{key:"operation",fn:function(e,i){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.onDelete(i.key)}}},[t._v("踢除")])]}}])})],1)],2)},staticRenderFns:[]};var k=n("Mz/3")(C,_,!1,function(t){n("DLey")},null,null);e.default=k.exports}});
//# sourceMappingURL=2.0a94ae12b8786e2dc470.js.map