webpackJsonp([22],{"0AUU":function(e,t){},CCOb:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("Sxqw"),i=o.n(n),a=o("26vW"),r=o.n(a),l=o("P7rZ"),s=o.n(l),d=o("DK4l"),c=o.n(d),u=o("6Koo"),f=o("/Ko3"),h=o.n(f),m={components:{AModal:h.a},data:function(){return{maskClosable:!1,ModalText:"自定义",visible:!1,confirmLoading:!1,searchCustomerInfo:!1,importCustomerInfo:!1}},mounted:function(){},methods:{showModal:function(e){this.ModalText="表格中第"+(e+1)+"条录音",this.visible=!0},handleOk:function(e){var t=this;this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,setTimeout(function(){t.visible=!1,t.confirmLoading=!1},2e3)},handleCancel:function(e){this.visible=!1}}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"recordModal"},[o("a-modal",{attrs:{title:"录音",visible:e.visible,maskClosable:e.maskClosable,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[o("p",[e._v(e._s(e.ModalText))])])],1)},staticRenderFns:[]},y=o("Mz/3")(m,p,!1,null,null,null).exports,g=o("3SZ7"),v=o.n(g),k=o("5nhJ"),T={components:{AModal:h.a,query:k.a},data:function(){return{maskClosable:!1,ModalText:"Content of the modal",visible:!1,confirmLoading:!1,structure:{fields:[{id:1,field:"dir",text:"方向",type:"select",options:["呼出","呼入"],isDuration:!1,isNumber:!1},{id:2,field:"agent_name",text:"坐席号码",type:"input",options:[],isDuration:!1,isNumber:!1},{id:3,field:"other_number",text:"对方号码",type:"input",options:[],isDuration:!1,isNumber:!1},{id:4,field:"created_datetime",text:"呼叫时间",type:"date",options:[],isDuration:!1,isNumber:!1},{id:5,field:"hangup_cause",text:"挂机原因",type:"select",options:["通话结束","正常挂机","被叫未注册","被叫忙","主叫取消","无应答","被叫无响应","被叫拒绝","无匹配路由","未指定原因","无效号码","号码格式无效"],isDuration:!1,isNumber:!1},{id:6,field:"talk_timed",text:"通话时长",type:"input",options:[],isDuration:!0,isNumber:!0},{id:7,field:"queue",text:"队列",type:"input",options:[],isDuration:!1,isNumber:!1}],stringConditions:[{id:1,condition:"=",text:"等于",type:"input"},{id:2,condition:"like_contain",text:"包含",type:"input"}],numberConditions:[{id:1,condition:"=",text:"等于",type:"input"},{id:2,condition:"!=",text:"不等于",type:"input"},{id:3,condition:">",text:"大于",type:"input"},{id:4,condition:">=",text:"大于等于",type:"input"},{id:5,condition:"<",text:"小于",type:"input"},{id:6,condition:"<=",text:"小于等于",type:"input"}],connectionWay:[{connection:"与"},{connection:"或"}]}}},methods:{showQueryModal:function(){this.visible=!0},handleOk:function(e){var t=this,o=this;this.$refs.dialogtreeQuery.dataSource.forEach(function(e){e.fieldSelected&&(o.$refs.dialogtreeQuery.searchConditionResult=[].concat(i()(o.$refs.dialogtreeQuery.searchConditionResult),[{key:e.key||{},field:e.fieldSelected||{},condition:e.conditionSelected||{},value:e.value||{}}]))}),this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,setTimeout(function(){t.visible=!1,t.confirmLoading=!1,alert(v()(t.$refs.dialogtreeQuery.searchConditionResult)),t.$refs.dialogtreeQuery.searchConditionResult=[]},2e3)},handleCancel:function(e){this.visible=!1}}},x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"queryModal"},[t("a-modal",{attrs:{title:"查询",visible:this.visible,maskClosable:this.maskClosable,confirmLoading:this.confirmLoading,width:"907px"},on:{ok:this.handleOk,cancel:this.handleCancel}},[t("query",{ref:"dialogtreeQuery",attrs:{structure:this.structure}})],1)],1)},staticRenderFns:[]},b=o("Mz/3")(T,x,!1,null,null,null).exports,C=o("Eg+s"),M=c.a.Group,w={props:{customerId:String},components:{ATable:r.a,ADivider:s.a,AButton:c.a,AButtonGroup:M,recordModal:y,queryModal:b,PageLayout:C.a},data:function(){return{dataSource:[],selectedRowKeys:[],loading:!1,loadingCallHistory:!1,filteredInfo:null,sortedInfo:null,pagination:{showQuickJumper:!0,pageSize:10}}},created:function(){var e=this;this.loading=!0,this.loadingCallHistory=!0,Object(u.setTimeout)(function(){e.getDataFromServer(),e.loading=!1,e.loadingCallHistory=!1},1e3)},mounted:function(){},watch:{customerId:{handler:function(e){var t=this;this.loading=!0,Object(u.setTimeout)(function(){t.loading=!1,t.deleteLocalHistory()},1e3)}}},computed:{title:function(){return this.$route.meta.title},hasSelected:function(){return this.selectedRowKeys.length>0},columns:function(){var e=this.sortedInfo,t=this.filteredInfo;e=e||{};var o=[{title:"方向",dataIndex:"direction",key:"direction",filters:[{text:"呼入",value:"呼入"},{text:"呼出",value:"呼出"}],filteredValue:(t=t||{}).direction||null,onFilter:function(e,t){return t.direction.includes(e)}},{title:"呼叫时间",dataIndex:"callTime",key:"callTime",sorter:function(e,t){return e.callTime.length-t.callTime.length},sortOrder:"callTime"===e.columnKey&&e.order},{title:"应答时间",dataIndex:"responseTime",key:"responseTime",sorter:function(e,t){return e.responseTime.length-t.responseTime.length},sortOrder:"responseTime"===e.columnKey&&e.order},{title:"挂机时间",dataIndex:"onHookTime",key:"onHookTime",sorter:function(e,t){return e.onHookTime.length-t.onHookTime.length},sortOrder:"onHookTime"===e.columnKey&&e.order},{title:"挂机原因",dataIndex:"onHookReason",key:"onHookReason",filters:[{text:"某原因",value:"某原因"},{text:"无原因",value:"无原因"}],filteredValue:t.direction||null,onFilter:function(e,t){return t.direction.includes(e)}},{title:"总时长",dataIndex:"totalTime",key:"totalTime",sorter:function(e,t){return e.totalTime.length-t.totalTime.length},sortOrder:"totalTime"===e.columnKey&&e.order},{title:"通话时长",dataIndex:"callDuration",key:"callDuration",sorter:function(e,t){return e.callDuration.length-t.callDuration.length},sortOrder:"callDuration"===e.columnKey&&e.order},{title:"操作",key:"operation",dataIndex:"operation",fixed:"right",width:100,scopedSlots:{customRender:"operation"}}];return o}},methods:{batchDelete:function(){var e=this;this.$confirm({title:"你确定要删除选中的客户信息吗?",content:"Some descriptions",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){e.loading=!0,Object(u.setTimeout)(function(){e.loading=!1,e.dataSource=e.dataSource.filter(function(t){return!e.selectedRowKeys.includes(t.key)}),e.selectedRowKeys=[]},1e3)},onCancel:function(){}})},showExportModal:function(){},showbatchModifyModal:function(){},onSelectChange:function(e){this.selectedRowKeys=e},getDataFromServer:function(){for(var e=0;e<25;e++)(e+1)%2==0?this.dataSource.push({key:e,id:e,direction:"呼入",callTime:"2018-08-"+e+" "+e+":00:00",responseTime:"2018-08-"+e+" "+e+":00:00",onHookTime:"2018-08-"+e+" "+e+":00:00",onHookReason:"某原因",totalTime:e+":00:00",callDuration:e+":00:00"}):this.dataSource.push({key:e,id:e,direction:"呼出",callTime:"2018-08-"+e+" "+e+":00:00",responseTime:"2018-08-"+e+" "+e+":00:00",onHookTime:"2018-08-"+e+" "+e+":00:00",onHookReason:"某原因",totalTime:e+":00:00",callDuration:e+":00:00"})},deleteLocalHistory:function(){this.dataSource=[]},showCallHistory:function(){var e=this;this.loading=!0,this.loadingCallHistory=!0,this.deleteLocalHistory(),Object(u.setTimeout)(function(){e.getDataFromServer(),e.loading=!1,e.loadingCallHistory=!1},1e3)},handleChange:function(e,t,o){this.filteredInfo=t,this.sortedInfo=o},onDelete:function(e){var t=this;this.$confirm({title:"你确定要删除该条记录吗?",content:"Some descriptions",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){t.loading=!0,Object(u.setTimeout)(function(){t.loading=!1;var o=[].concat(i()(t.dataSource));t.dataSource=o.filter(function(t){return t.key!==e})},1e3)},onCancel:function(){}})},showRecordModal:function(e){this.$refs.dialogtreeShowRecordModal.showModal(e)},showQueryModel:function(){this.$refs.dialogtreeQueryModal.showQueryModal()}}},S={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("page-layout",{attrs:{title:e.title}},[o("template",{slot:"action"},[o("div",{staticClass:"interval-sovle"},[o("a-button-group",{staticStyle:{"margin-right":"8px"}},[o("a-button",{attrs:{icon:"delete",loading:e.loading},on:{click:e.batchDelete}},[e._v("\n          批量删除\n        ")]),e._v(" "),o("a-button",{attrs:{icon:"export"},on:{click:e.showExportModal}},[e._v("\n          导出\n        ")])],1),e._v(" "),o("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.showQueryModel}},[o("span",[e._v("查询")]),e._v(" "),o("queryModal",{ref:"dialogtreeQueryModal"})],1)],1)]),e._v(" "),o("div",{staticClass:"callHistory"},[o("a-table",{attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},dataSource:e.dataSource,columns:e.columns,scroll:{x:1300},pagination:e.pagination,loading:e.loading},on:{change:e.handleChange},scopedSlots:e._u([{key:"operation",fn:function(t,n){return[o("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(n.key)}}},[e._v("删除")]),e._v(" "),o("a-divider",{attrs:{type:"vertical"}}),e._v(" "),o("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.showRecordModal(n.key)}}},[e._v("录音")]),e._v(" "),o("recordModal",{ref:"dialogtreeShowRecordModal"})]}}])})],1)],2)},staticRenderFns:[]};var _=o("Mz/3")(w,S,!1,function(e){o("0AUU")},null,null);t.default=_.exports}});
//# sourceMappingURL=22.a76757f4e6939ad714bc.js.map